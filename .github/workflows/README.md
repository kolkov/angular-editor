# GitHub Actions Workflows

## npm-publish.yml

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ npm –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ git tag.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–¢—Ä–∏–≥–≥–µ—Ä**: –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ push —Ç–µ–≥–∞ –≤–∏–¥–∞ `v*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `v3.0.0`, `v3.1.0`)
2. **–°–±–æ—Ä–∫–∞**: –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –∏ production build –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
3. **–ü—É–±–ª–∏–∫–∞—Ü–∏—è**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç npm tag –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - Stable –≤–µ—Ä—Å–∏–∏ (3.0.0, 3.1.0) ‚Üí –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —Å —Ç–µ–≥–æ–º `latest`
   - Pre-release (3.0.0-beta.1, 3.1.0-rc.1) ‚Üí –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —Å —Ç–µ–≥–æ–º `next`
4. **GitHub Release**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç GitHub Release —Å CHANGELOG

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑):

#### üîê NPM Trusted Publishing (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤! (—Å 15 –Ω–æ—è–±—Ä—è 2025 –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ç–æ–∫–µ–Ω—ã –±—É–¥—É—Ç –æ—Ç–∫–ª—é—á–µ–Ω—ã)**

1. –ó–∞–π—Ç–∏ –Ω–∞ [npmjs.com](https://www.npmjs.com/)
2. –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–∞–∫–µ—Ç—É: `@kolkov/angular-editor`
3. **Settings** ‚Üí **Publishing Access**
4. **Add Trusted Publisher**
5. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - **Provider**: GitHub
   - **Organization/User**: `kolkov`
   - **Repository**: `angular-editor`
   - **Workflow filename**: `npm-publish.yml`
   - **Environment**: –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º (–∏–ª–∏ —É–∫–∞–∑–∞—Ç—å `production` –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)

6. **Save** ‚Üí –ì–æ—Ç–æ–≤–æ! üéâ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ –Ω—É–∂–Ω—ã —Ç–æ–∫–µ–Ω—ã (NPM_TOKEN)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π
- ‚úÖ Provenance (–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞)
- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ OIDC

#### üîë –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Granular Access Token (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–±)

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ Trusted Publishing –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**

1. –ó–∞–π—Ç–∏ –Ω–∞ [npmjs.com](https://www.npmjs.com/)
2. Settings ‚Üí Access Tokens ‚Üí Generate New Token
3. –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø: **Granular Access Token**
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å:
   - **Expiration**: –º–∞–∫—Å–∏–º—É–º 90 –¥–Ω–µ–π
   - **Packages**: –≤—ã–±—Ä–∞—Ç—å `@kolkov/angular-editor`
   - **Permissions**: Read and write
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω

6. –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
7. Settings ‚Üí Secrets and variables ‚Üí Actions
8. New repository secret:
   - Name: `NPM_TOKEN`
   - Secret: –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –∏–∑ npm

9. –û–±–Ω–æ–≤–∏—Ç—å workflow: —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `NODE_AUTH_TOKEN` –≤ —à–∞–≥–µ publish

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 7-90 –¥–Ω–µ–π
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–ª—è—Ç—å –≤ GitHub Secrets
- ‚ö†Ô∏è –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ç–æ–∫–µ–Ω—ã –±—É–¥—É—Ç –æ—Ç–∫–ª—é—á–µ–Ω—ã 15.11.2025

#### ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º push —Ç–µ–≥–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞.

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ package.json (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)

# 2. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "chore(release): 3.0.0"

# 3. –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å —Ç–µ–≥
git tag v3.0.0
git push origin v3.0.0

# 4. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
#    - –ó–∞–ø—É—Å—Ç–∏—Ç —Ç–µ—Å—Ç—ã
#    - –°–æ–±–µ—Ä—ë—Ç production build
#    - –û–ø—É–±–ª–∏–∫—É–µ—Ç –≤ npm
#    - –°–æ–∑–¥–∞—Å—Ç GitHub Release
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–≥–∞**: beta/alpha/rc ‚Üí `next`, stable ‚Üí `latest`
- ‚úÖ **Provenance**: –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å npm provenance –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ **–¢–µ—Å—Ç—ã**: –í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
- ‚úÖ **GitHub Release**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å CHANGELOG
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: NPM —Ç–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ GitHub Secrets

### –ü—Ä–æ–≤–µ—Ä–∫–∞ workflow:

–ü–æ—Å–ª–µ push —Ç–µ–≥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
- GitHub ‚Üí Actions tab
- –¢–∞–º –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ workflow

### –û—Ç–∫–∞—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# –£–¥–∞–ª–∏—Ç—å –≤–µ—Ä—Å–∏—é –∏–∑ npm (–≤ —Ç–µ—á–µ–Ω–∏–µ 72 —á–∞—Å–æ–≤)
npm unpublish @kolkov/angular-editor@3.0.0

# –£–¥–∞–ª–∏—Ç—å —Ç–µ–≥ —Å GitHub
git push origin --delete v3.0.0

# –£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ–≥
git tag -d v3.0.0
```

**–í–∞–∂–Ω–æ**: npm unpublish —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—á–µ–Ω–∏–µ 72 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏!
